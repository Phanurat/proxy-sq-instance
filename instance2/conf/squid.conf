http_port 0.0.0.0:15101
http_port 0.0.0.0:15102
http_port 0.0.0.0:15103
http_port 0.0.0.0:15104
http_port 0.0.0.0:15105
http_port 0.0.0.0:15106
http_port 0.0.0.0:15107
http_port 0.0.0.0:15108
http_port 0.0.0.0:15109
http_port 0.0.0.0:15110
http_port 0.0.0.0:15111
http_port 0.0.0.0:15112
http_port 0.0.0.0:15113
http_port 0.0.0.0:15114
http_port 0.0.0.0:15115
http_port 0.0.0.0:15116
http_port 0.0.0.0:15117
http_port 0.0.0.0:15118
http_port 0.0.0.0:15119
http_port 0.0.0.0:15120
http_port 0.0.0.0:15121
http_port 0.0.0.0:15122
http_port 0.0.0.0:15123
http_port 0.0.0.0:15124
http_port 0.0.0.0:15125
http_port 0.0.0.0:15126
http_port 0.0.0.0:15127
http_port 0.0.0.0:15128
http_port 0.0.0.0:15129
http_port 0.0.0.0:15130
http_port 0.0.0.0:15131
http_port 0.0.0.0:15132
http_port 0.0.0.0:15133
http_port 0.0.0.0:15134
http_port 0.0.0.0:15135
http_port 0.0.0.0:15136
http_port 0.0.0.0:15137
http_port 0.0.0.0:15138
http_port 0.0.0.0:15139
http_port 0.0.0.0:15140
http_port 0.0.0.0:15141
http_port 0.0.0.0:15142
http_port 0.0.0.0:15143
http_port 0.0.0.0:15144
http_port 0.0.0.0:15145
http_port 0.0.0.0:15146
http_port 0.0.0.0:15147
http_port 0.0.0.0:15148
http_port 0.0.0.0:15149
http_port 0.0.0.0:15150
http_port 0.0.0.0:15151
http_port 0.0.0.0:15152
http_port 0.0.0.0:15153
http_port 0.0.0.0:15154
http_port 0.0.0.0:15155
http_port 0.0.0.0:15156
http_port 0.0.0.0:15157
http_port 0.0.0.0:15158
http_port 0.0.0.0:15159
http_port 0.0.0.0:15160
http_port 0.0.0.0:15161
http_port 0.0.0.0:15162
http_port 0.0.0.0:15163
http_port 0.0.0.0:15164
http_port 0.0.0.0:15165
http_port 0.0.0.0:15166
http_port 0.0.0.0:15167
http_port 0.0.0.0:15168
http_port 0.0.0.0:15169
http_port 0.0.0.0:15170
http_port 0.0.0.0:15171
http_port 0.0.0.0:15172
http_port 0.0.0.0:15173
http_port 0.0.0.0:15174
http_port 0.0.0.0:15175
http_port 0.0.0.0:15176
http_port 0.0.0.0:15177
http_port 0.0.0.0:15178
http_port 0.0.0.0:15179
http_port 0.0.0.0:15180
http_port 0.0.0.0:15181
http_port 0.0.0.0:15182
http_port 0.0.0.0:15183
http_port 0.0.0.0:15184
http_port 0.0.0.0:15185
http_port 0.0.0.0:15186
http_port 0.0.0.0:15187
http_port 0.0.0.0:15188
http_port 0.0.0.0:15189
http_port 0.0.0.0:15190
http_port 0.0.0.0:15191
http_port 0.0.0.0:15192
http_port 0.0.0.0:15193
http_port 0.0.0.0:15194
http_port 0.0.0.0:15195
http_port 0.0.0.0:15196
http_port 0.0.0.0:15197
http_port 0.0.0.0:15198
http_port 0.0.0.0:15199
http_port 0.0.0.0:15200

# ตั้งค่า basic authentication
auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd
auth_param basic realm Proxy
auth_param basic credentialsttl 2 hours

# สร้าง ACL สำหรับผู้ใช้ที่ authenticated
acl authenticated proxy_auth REQUIRED

# อนุญาตเฉพาะผู้ใช้ที่ authenticated
http_access allow authenticated

# ปฏิเสธทุกคนอื่น
http_access deny all

# Log & cache
cache_log /var/log/squid/cache.log
cache_dir ufs /var/spool/squid 100 16 256
