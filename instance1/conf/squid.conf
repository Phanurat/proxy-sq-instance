http_port 0.0.0.0:15001
http_port 0.0.0.0:15002
http_port 0.0.0.0:15003
http_port 0.0.0.0:15004
http_port 0.0.0.0:15005
http_port 0.0.0.0:15006
http_port 0.0.0.0:15007
http_port 0.0.0.0:15008
http_port 0.0.0.0:15009
http_port 0.0.0.0:15010
http_port 0.0.0.0:15011
http_port 0.0.0.0:15012
http_port 0.0.0.0:15013
http_port 0.0.0.0:15014
http_port 0.0.0.0:15015
http_port 0.0.0.0:15016
http_port 0.0.0.0:15017
http_port 0.0.0.0:15018
http_port 0.0.0.0:15019
http_port 0.0.0.0:15020
http_port 0.0.0.0:15021
http_port 0.0.0.0:15022
http_port 0.0.0.0:15023
http_port 0.0.0.0:15024
http_port 0.0.0.0:15025
http_port 0.0.0.0:15026
http_port 0.0.0.0:15027
http_port 0.0.0.0:15028
http_port 0.0.0.0:15029
http_port 0.0.0.0:15030
http_port 0.0.0.0:15031
http_port 0.0.0.0:15032
http_port 0.0.0.0:15033
http_port 0.0.0.0:15034
http_port 0.0.0.0:15035
http_port 0.0.0.0:15036
http_port 0.0.0.0:15037
http_port 0.0.0.0:15038
http_port 0.0.0.0:15039
http_port 0.0.0.0:15040
http_port 0.0.0.0:15041
http_port 0.0.0.0:15042
http_port 0.0.0.0:15043
http_port 0.0.0.0:15044
http_port 0.0.0.0:15045
http_port 0.0.0.0:15046
http_port 0.0.0.0:15047
http_port 0.0.0.0:15048
http_port 0.0.0.0:15049
http_port 0.0.0.0:15050
http_port 0.0.0.0:15051
http_port 0.0.0.0:15052
http_port 0.0.0.0:15053
http_port 0.0.0.0:15054
http_port 0.0.0.0:15055
http_port 0.0.0.0:15056
http_port 0.0.0.0:15057
http_port 0.0.0.0:15058
http_port 0.0.0.0:15059
http_port 0.0.0.0:15060
http_port 0.0.0.0:15061
http_port 0.0.0.0:15062
http_port 0.0.0.0:15063
http_port 0.0.0.0:15064
http_port 0.0.0.0:15065
http_port 0.0.0.0:15066
http_port 0.0.0.0:15067
http_port 0.0.0.0:15068
http_port 0.0.0.0:15069
http_port 0.0.0.0:15070
http_port 0.0.0.0:15071
http_port 0.0.0.0:15072
http_port 0.0.0.0:15073
http_port 0.0.0.0:15074
http_port 0.0.0.0:15075
http_port 0.0.0.0:15076
http_port 0.0.0.0:15077
http_port 0.0.0.0:15078
http_port 0.0.0.0:15079
http_port 0.0.0.0:15080
http_port 0.0.0.0:15081
http_port 0.0.0.0:15082
http_port 0.0.0.0:15083
http_port 0.0.0.0:15084
http_port 0.0.0.0:15085
http_port 0.0.0.0:15086
http_port 0.0.0.0:15087
http_port 0.0.0.0:15088
http_port 0.0.0.0:15089
http_port 0.0.0.0:15090
http_port 0.0.0.0:15091
http_port 0.0.0.0:15092
http_port 0.0.0.0:15093
http_port 0.0.0.0:15094
http_port 0.0.0.0:15095
http_port 0.0.0.0:15096
http_port 0.0.0.0:15097
http_port 0.0.0.0:15098
http_port 0.0.0.0:15099
http_port 0.0.0.0:15100

# ตั้งค่า basic authentication
auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd
auth_param basic realm Proxy
auth_param basic credentialsttl 2 hours

# สร้าง ACL สำหรับผู้ใช้ที่ authenticated
acl authenticated proxy_auth REQUIRED

# อนุญาตเฉพาะผู้ใช้ที่ authenticated
http_access allow authenticated

# ปฏิเสธทุกคนอื่น
http_access deny all

# Log & cache
cache_log /var/log/squid/cache.log
cache_dir ufs /var/spool/squid 100 16 256
